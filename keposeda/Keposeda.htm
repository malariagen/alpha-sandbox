<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
    <title></title>

    <link href="DQXCommon.css" rel="stylesheet" type="text/css" />

    <!-- jQuery sources -->
    <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.ba-resize.js" type="text/javascript"></script>
    <script src="Scripts/jquery.dragndrop.js?<?=time()?" type="text/javascript"></script>


    <!-- DQX general -->
    <script src="Scripts/base64.js" type="text/javascript"></script>
    <script src="Scripts/DQXUtils.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXDataDecoders.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXSQL.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXDataFetchers.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXScroller.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXDocElement.js?<?=time()?" type="text/javascript"></script>

    <!-- DQX chromosome plot -->
    <script src="Scripts/DQXChannelPlot.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXChannelPlotChannel.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXChannelPlotChannelScale.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXChannelPlotChannelYVals.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXChannelPlotChannelAnnotation.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXChromoPlotter.js?<?=time()?" type="text/javascript"></script>

    <!-- DQX query table & query builder -->
    <script src="Scripts/DQXQueryTable.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/DQXQueryBuilder.js?<?=time()?" type="text/javascript"></script>

    <!-- DQX high level GUI components -->
    <script src="Scripts/DQXGuiComponents.js?<?=time()?" type="text/javascript"></script>

    <!-- Specific code for this page -->
    <script src="Scripts/KPS_BuildChromoView.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/KPS_BuildWINTable.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/KPS_BuildSNPTable.js?<?=time()?" type="text/javascript"></script>
    <script src="Scripts/KPS_Build.js?<?=time()?" type="text/javascript"></script>

</head>
<body>


    <img src="Bitmaps/malariagen_logo.png" alt="MalariaGEN logo" />
    <div style="height: 14px"></div>
    <div style="background-color: rgb(0,0,180); height: 4px"></div>
    <div style="height: 14px"></div>
    105 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras sagittis pharetra
    enim, at convallis nisl rhoncus quis. Nam arcu magna, pulvinar faucibus commodo
    eget, ultrices vitae neque. Ut mollis bibendum ultricies. Curabitur varius justo
    in enim tincidunt pulvinar. Integer semper adipiscing nisi, ut blandit arcu porttitor
    ut. Phasellus et sem risus. Donec placerat, libero nec posuere commodo, dolor metus
    hendrerit eros, ut faucibus mi urna id purus. Pellentesque habitant morbi tristique
    senectus et netus et malesuada fames ac turpis egestas. Vivamus neque urna, rutrum
    sit amet porta at, volutpat in eros. Phasellus eu elit ante, vel iaculis nisi. Nullam
    id metus erat. Duis porta fringilla neque, quis hendrerit ante auctor a. Nullam
    iaculis quam vitae velit aliquam sodales. Class aptent taciti sociosqu ad litora
    torquent per conubia nostra, per inceptos himenaeos. Mauris eu metus augue, sed
    euismod erat. Ut vel est enim.





    <!-------------- Tabbed environment with the different views -------------------------->
    <div class="DQXTabSet" style="min-width: 800px;margin-top:20px;">
        <div class="DQXTabs">
            <div id="browser" class="DQXTab DQXTabActive">
                Chromosome viewer
                <span class="DQXInfoButton">HelpChromoBrowser</span>
            </div>
            <div id="querywindowsimple" class="DQXTab DQXTabInactive">
                Significant windows
                <span class="DQXInfoButton">HelpTableWINSimple</span>
            </div>
            <div id="querywindowadvanced" class="DQXTab DQXTabInactive">
                Advanced window query
                <span class="DQXInfoButton">HelpTableWINdvanced</span>
            </div>
            <div id="querysnpadvanced" class="DQXTab DQXTabInactive">
                Advanced SNP query
                <span class="DQXInfoButton">HelpTableSNPAdvanced</span>
            </div>
        </div>


        <div class="DQXTabBody DQXShadow"><!-- The body of the tabs-->


            <!-- Chromosome browser tab -->
            <div id="Cbrowser" class="DQXTabContent DQXLightFrame">
                <div style="padding-top: 5px;padding-bottom:0px;">
                    <div id='BrowserContainer' class="DQXDarkFrame" style="width: 100%">
                        <div style="padding-top: 6px; padding-left: 6px">
                            <select id="stat" onchange="OnChangeStat()">
                                <option value="IHS">iHS statistic</option>
                                <option value="XPEHH">XP-EHH statistic</option>
                                <option value="BOTH">iHS and XP-EHH statistics</option>
                            </select>
                            &nbsp;
                            <button type="button" onclick="OnAllPops()">
                                All populations</button>
                            &nbsp;
                            <button type="button" onclick="OnNoPops()">
                                Clear populations</button>
                        </div>
                        <div id='ChromoView' style="padding: 6px;">
                        </div>
                    </div>
                </div>
            </div>



            <!-- Simple window table tab -->
            <div id="Cquerywindowsimple" class="DQXTabContent DQXLightFrame">
                <div style="padding: 5px; padding-top: 5px; padding-bottom:0px;">
                    <!-- The query elements -->
                    Minimum number of populations in top 1%:
                    <input id="QueryVal" type="text" maxlength="2" size="2" value="1" onkeyup="InvalidateQueryWindowSimple()"/>
                    for
                    <select id="QueryStat" onchange="InvalidateQueryWindowSimple()">
                        <option value="IHS">IHS statistics</option>
                        <option value="XPEHH">XPEHH statistics</option>
                    </select>
                    <div style="clear:both;padding:5px;">
                        <span id="QueryPopChecks" style="clear:both"></span>
                    </div>
                    <div style="padding-left:17px;padding-top:15px;padding-bottom:5px;">
                        <span class="DQXGlowButton" onclick="UpdateQueryWinsSimple()">
                        Update query results</span>
                    </div>
                </div>
                <!-- The table -->
                <div id="IDTableWinsSimple" class="DQXDarkFrame" style="padding: 5px;">
                </div>
            </div>


            <!-- Advanced window table tab -->
            <div id="Cquerywindowadvanced" class="DQXTabContent DQXLightFrame">
                <div style="padding: 5px; padding-top: 5px;padding-bottom:0px;">
                    <!-- The query builder element -->
                    <div id="IDQueryWindowsAdvanced" class="DQXLightFrame" style="overflow: auto;
                        padding-left: 7px; padding-right: 7px; margin-left:20px;">
                    </div>
                    <div style="padding-left:17px;padding-top:15px;padding-bottom:5px;">
                        <span class="DQXGlowButton" onclick="UpdateQueryWinsAdvanced()">
                        Update query results</span>
                    </div>
                </div>
                <!-- The table -->
                <div id="IDTableWinsAdvanced" class="DQXDarkFrame" style="padding: 5px;">
                </div>
            </div>


            <!-- Advanced snp table tab -->
            <div id="Cquerysnpadvanced" class="DQXTabContent DQXLightFrame">
                <div style="padding: 5px; padding-top: 5px;padding-bottom:0px;">
                    <!-- The query builder element -->
                    <div id="IDQuerySNPAdvanced" class="DQXLightFrame" style="overflow: auto;
                        padding-left: 7px; padding-right: 7px; margin-left:20px">
                    </div>
                    <div style="padding-left:17px;padding-top:15px;padding-bottom:5px;">
                        <span class="DQXGlowButton" onclick="UpdateQuerySNPAdvanced()">
                        Update query results</span>
                    </div>
                </div>
                <!-- The table -->
                <div id="IDTableSNPAdvanced" class="DQXDarkFrame" style="padding: 5px;">
                </div>
            </div>


        </div>
    </div>




    <div style="clear: both; width: 100%; height: 30px;">
    </div>


    <!-- Disclaimer -->
    <div style="background-color: rgb(255,255,190);">
        <strong>WARNING: Everything on <a href="http://alpha.malariagen.net/">alpha.malariagen.net</a>
            is an experimental prototype. Web applications may be broken and data may be wrong.
            Use at your own risk.</strong>
    </div>



<!--------------------------- The section with the help content blocks ---------------------------------->

    <div style="display: none">

        <div id="HelpChromoBrowser">
            <div class="DQXHelp" style="width: 600px">
                <b>The chromosome browser</b>
                <p />
                This interactive browser displays the windowed data and the individual SNP data, mapped on the genome.
                <p />
                The controls on the top allow you to choose
                <ul>
                <li>what statistic(s) to display</li>
                <li>what population(s) to display</li>
                <li>what chromosome to display</li>
                </ul>
                <p />
                Note that the SNP information and annotation are only displayed when sufficiently zoomed in.
                You can also click on a window point, a SNP point, or an annotation feature to bring up a popup window with additional information.
                <p />
                <b>Zooming</b><br />
                You can zoom using the scroll wheel, or by dragging the zoom slider in the bottom left of the image.
                <p />
                <b>Scrolling</b><br />
                You pan the image to a new position by clicking and dragging with the mouse. Alternatively, you can drag the scroll bar at the bottom right to a new position.
                <p/>
                <b>Finding a feature</b><br />
                You can use the edit box on the bottom of the viewer to locate and jump to a specific feature on the genome.
            </div>
        </div>


        <div id="HelpTableWINSimple">
            <div class="DQXHelp" style="width: 600px">
                This tool reports windows that have one or more population statistics that rank in the top 1%, and hence are likely to be significant.
                <p />
                You can specify the minimum total number of populations that must occur in the top 1%. (Note that, if you set this value to '8', this will reproduce the data from table XXX in the paper for the selected statistic).
                <p/>
                In addition, you can specify explicitely for each individual population whether or not it should appear in the top 1%, using the check boxes.
                <p />
                Note that you can specify this query to act on iHS or XP-EHH data.
            </div>
        </div>


        <div id="HelpTableWINdvanced">
            <div class="DQXHelp" style="width: 600px">
                This tool reports data for windows, and allows you to define a custom query to filter the results.
                <p />
                <span class="DQXInclude">IncludeHelpQueryBuilder</span>
            </div>
        </div>


        <div id="HelpTableSNPAdvanced">
            <div class="DQXHelp" style="width: 600px">
                This tool reports data for individual SNPs, and allows you to define a custom query to filter the results.
                <p />
                <span class="DQXInclude">IncludeHelpQueryBuilder</span>
            </div>
        </div>


        <div id="HelpChromoBrowserFindGene">
            <div class="DQXHelp" style="width: 600px">
                The following searches can be entered into this box:<br />
                <ul>
                    <li>A gene name</li>
                    <li>A SNP RS id</li>
                    <li>A chromosome position in the format <b>chr7:10000000</b></li>
                </ul>
                When you start typing in the edit box, a set of features compatible with your search text is automatically shown on the right. Clicking on any of these items makes the browser jump to it.
            </div>
        </div>
    </div>



    <!-------------------------------- The section with the include elements ------------------------------------------>
    <div style="display: none">

        <div id="IncludeHelpQueryBuilder">
            <h3>How to use the interactive query builder</h3>
            The interactive query builder allows you to create complex queries and visualise them in an intuitive way, as a vertical flow.
            The top node represents the complete data set, and the bottom node stands for the final filtered set.
            Each item in the vertical stack represents an extra condition that must be fulfilled (i.e. combined with an <b>AND</b> condition).
            <p />
            In addition, you can create alternative paths that are represented as parallel blocks aligned horizontally. At least one of these parallel paths must be fulfilled (i.e. combined with an <b>OR</b> condition).
            <p />
            Note that, for each individual statement in the query, you can modify its definition by using the pull down boxes to change the field it acts on, and the type of comparison used.
            <p />

            <table cellpadding="3" valign="middle">
                <tr>
                    <td>
                        <img src="Bitmaps/adddown.png" alt="Add Down" width="40px" height="20px"/>
                    </td>
                    <td>
                        Adds a new statement as an extra condition in the vertical flow.<br />
                        <b>All blocks</b> in a <b>vertical</b> stack of components must be fullfilled.
                    </td>
                </tr>
                <tr>
                    <td>
                        <img src="Bitmaps/addright.png" alt="Add Right" width="40px" height="20px"/>
                    </td>
                    <td>
                        Adds a new statement as a new, alternative flow, represented horizontally.<br /> <b>At least one block</b> in a set of <b>horizontal</b> alternatives mush be fulfilled.
                    </td>
                </tr>
                <tr>
                    <td>
                        <img src="Bitmaps/close.png" alt="Close" width="20px" height="20px" />
                    </td>
                    <td>
                        Removes a statement from the flow.
                    </td>
                </tr>
            </table>
        </div>


    </div>



    <!-------------------------------- myDataConsumer for float boxes --------------------------------->
    <div id="DQXFloatBoxHolder"></div>

</body>
</html>
